<!DOCTYPE html>
<head>
  <meta charset="UTF-8" />
  <title>Test Camera</title>
  <script src="../dist/bundle.js"></script>
</head>
<body>
  <button id="askPerm" onclick="askPermission()">
    Click me to ask for permission!
  </button>
  <select name="cameras" id="cameraList" style="visibility: collapse"></select>
</body>
<script>
  var Eyetracker = eyetrack.initEyetracker();

  async function askPermission() {
    await Eyetracker.getCameraPermission();
    const btn = document.getElementById("askPerm");
    btn.style.display = "none";
  }

  async function cameraSelector() {
    const devices = await Eyetracker.getListOfCameras();
    console.log(devices[0]);
    const selector = document.getElementById("cameraList");
    devices.forEach((d) => {
      let op = document.createElement("option");
      op.value = d.deviceId;
      op.innerHTML = d.label;

      selector.appendChild(op);
    });
    selector.style.visibility = "visible";
  }

  askPermission;
  cameraSelector();
</script>
